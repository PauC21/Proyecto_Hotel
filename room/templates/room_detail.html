<!-- room_detail.html -->
{% extends 'base.html' %}

{% block title %}Detalles de la habitaciÃ³n{% endblock title %}

{% block content %}
  <h2 class="titlex">Detalles de la habitaciÃ³n</h2>
  <p>NÃºmero de habitaciÃ³n: {{ room.room_number }}</p>
  <p>Tipo de habitaciÃ³n: {{ room.room_type }}</p>
  <p>Precio por noche: $ {{ room.price_per_night }}</p>

  <hr>

  <!-- Botones de acciÃ³n -->
  <div style="margin-top: 20px;">
    <!-- Boton editar -->
    <a class="linkx" href="{% url 'room_update' room.pk %}" class="btn btn-warning">âœï¸ Editar</a>
    <!-- Boton de eliminar -->
    <form action="{% url 'room_delete' room.pk %}" method="post" style="display:inline;">
      {% csrf_token %}
      <button type="submit" class="linkx" onclick="return confirm('Â¿EstÃ¡s seguro de eliminar esta habitaciÃ³n?');">ğŸ—‘ï¸ Eliminar</button>
    </form>
    <!-- Boton de mantenimiento -->
    {% if room.status == 'maintenance' %}
    <form action="{% url 'toggle_maintenance' room.pk %}" method="post" style="display:inline;">
    {% csrf_token %}
      <button type="submit" class="linkx">âœ… Marcar como disponible</button>
    </form>
      <p style="color:red; font-weight:bold;">La habitaciÃ³n estÃ¡ en mantenimiento.</p>
    {% else %}
    <form action="{% url 'toggle_maintenance' room.pk %}" method="post" style="display:inline;">
    {% csrf_token %}
      <button type="submit" class="linkx">ğŸ› ï¸ Poner en mantenimiento</button>
    </form>
    {% endif %}
  </div>
  
  <h3 class="titlex">PrÃ³ximas reservas</h3>
  <table>
    <thead>
      <tr>
        <th>Huesped</th>
        <th>Fecha de llegada</th>
        <th>Fecha de salida</th>
      </tr>
    </thead>
    <tbody>
      {% for reservation in reservations %}
        <tr>
          <td><a href="{% url 'guest_detail' reservation.guest.pk %}">{{ reservation.guest.first_name }} {{ reservation.guest.last_name }}</a></td>
          <td>{{ reservation.check_in_date }}</td>
          <td>{{ reservation.check_out_date }}</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  <a class="linkx" href="{% url 'reservation_list'  %}?room_number={{ room.room_number }}">Todas las reservas</a>

  <h3 class="titlex">Estado de la reserva</h3>
  {% if room.is_booked_now %}
    <p>La habitaciÃ³n estÃ¡ reservada actualmente.</p>
  {% else %}
    <p>La habitaciÃ³n estÃ¡ disponible actualmente.</p>
  {% endif %}
{% endblock content %}
