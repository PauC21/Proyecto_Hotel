{% extends 'base.html' %}
{% block title %} Detalles del huÃ©sped {% endblock title %}
{% block content %}
<h2 class="titlex">Detalles del huÃ©sped</h2>
  <p><strong>Nombre:</strong> {{ guest.first_name }} {{ guest.last_name }}</p>
  <p><strong>Correo Electronico:</strong> {{ guest.email }}</p>
  <p><strong>Numero de contacto:</strong> {{ guest.phone_number }}</p>
  <p><strong>DirecciÃ³n:</strong> {{ guest.address }}</p>
  <p><strong>Numero de Documento:</strong> {{ guest.government_id }}</p>
  
  <a class="linkx" href="{% url 'reservation_create' %}?guest_id={{ guest.id }}">Generar Reserva </a> 

  <div style="display:flex; gap:8px; margin-top:12px;">
    <a class="linkx" href="{% url 'guest_update' guest.pk %}">âœï¸ Modificar</a>
    <a class="linkx" href="{% url 'guest_delete' guest.pk %}">ğŸ—‘ï¸ Eliminar</a>
    <a class="linkx" href="{% url 'guest_list' %}">â¬… Volver a la lista</a>
  </div>

    <hr>

  <h3 class="titlex">Historial de Reservas</h3>

  {% if reservations %}
    <table>
      <thead>
        <tr>
          <th>Reserva</th>
          <th>HabitaciÃ³n</th>
          <th>Check-in</th>
          <th>Check-out</th>
          <th>Estado</th>
        </tr>
      </thead>
      <tbody>
        {% for res in reservations %}
          <tr>
            <td>#{{ res.pk }}</td>
            <td>{{ res.room }}</td>
            <td>{{ res.check_in_date }}</td>
            <td>{{ res.check_out_date }}</td>
            <td>
              {% if res.status == 'pending' %}
                <span style="color:orange; font-weight:bold;">ğŸŸ  Pendiente</span>
              {% elif res.status == 'confirmed' %}
                <span style="color:green; font-weight:bold;">ğŸŸ¢ Confirmada</span>
              {% elif res.status == 'cancelled' %}
                <span style="color:red; font-weight:bold;">ğŸ”´ Cancelada</span>
              {% elif res.status == 'check_in' %}
                <span style="color:blue; font-weight:bold;">ğŸ”µ Check-In</span>
              {% elif res.status == 'check_out' %}
                <span style="color:gray; font-weight:bold;">âšª Check-Out</span>
              {% else %}
                {{ res.get_status_display }}
              {% endif %}
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>

    {# paginaciÃ³n mÃ­nima si la activaste en la vista #}
    {% if reservations_page_obj and reservations_page_obj.has_other_pages %}
      <div class="pagination">
        {% if reservations_page_obj.has_previous %}
          <a class="linkx" href="?page={{ reservations_page_obj.previous_page_number }}">Â« anterior</a>
        {% endif %}
        <span> PÃ¡gina {{ reservations_page_obj.number }} de {{ reservations_page_obj.paginator.num_pages }} </span>
        {% if reservations_page_obj.has_next %}
          <a class="linkx" href="?page={{ reservations_page_obj.next_page_number }}">siguiente Â»</a>
        {% endif %}
      </div>
    {% endif %}

  {% else %}
    <p>El huÃ©sped no tiene reservas registradas.</p>
  {% endif %}

  {% endblock content %} 

